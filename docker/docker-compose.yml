services:
  prism-dev:
    build:
      context: .
      dockerfile: Dockerfile
      target: dev
      network: host
      args:
        INSTALL_ROS2: "false"
        HOST_UID: 1000
        HOST_GID: 1000
    image: prism-dev:cuda12.1
    command: bash
    network_mode: host
    ipc: host
    # privileged: true
    deploy:
      resources:
        reservations:
          devices:
            - driver: nvidia
              count: 1
              capabilities: [gpu]

  prism-dev-ros2:
    build:
      context: .
      dockerfile: Dockerfile
      target: dev
      network: host
      args:
        INSTALL_ROS2: "true"
        HOST_UID: 1000
        HOST_GID: 1000
    image: prism-dev:cuda12.1-ros2
    command: bash
    network_mode: host
    ipc: host
    # privileged: true
    deploy:
      resources:
        reservations:
          devices:
            - driver: nvidia
              count: 1
              capabilities: [gpu]
